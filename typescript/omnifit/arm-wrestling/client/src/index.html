<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>Drone</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style>
    html, body {
      width:  100%;
      height: 100%;
      margin: 0px;
      overflow:hidden;
      background-color: #2b2b2b;
    }
  </style>

</head>
<body>
  <!--<input type="text" id="callJS">-->
  <app-root></app-root>
</body>
<script type="text/javascript">
  function callJS(data) {
    // document.getElementById("con").value=data;
    // // Add an event listener
    // Create the event
    // var event = new CustomEvent('omnifit-concentration', {'detail': {'name':'omnifit', 'data': Number(data)} });
    // document.getElementById('callJS').value(data);
    var event = new CustomEvent('omnifit-headset-concentration', {'detail': Number(data)});
    // Dispatch/Trigger/Fire the event
    var a = window.dispatchEvent(event);
    console.log("callJS "+data+"-=--"+a);
  }

  // window.addEventListener("omnifit-concentration", function(e) {
  //   console.log(e.detail); // Prints "Example of an event"
  //   e.preventDefault()
  // });


  var dummyInterval = undefined;
  function dummy(interval) {
    if(!interval){
      interval = 2000;
    }
    dummyStop();
    dummyInterval = setInterval(function(){
      var max = 10;
      var min = 0;
      var data = Math.floor(Math.random() * (max - min)) + min;
      var event = new CustomEvent('omnifit-headset-concentration', {'detail': Number(data)});
      var a = window.dispatchEvent(event);
      console.log("dummy "+data+"  "+a);
    },interval);
  }
  function dummyStop() {
    if(dummyInterval){
      clearInterval(dummyInterval);
    }
  }
  function wsSend(obj) {
    var event = new CustomEvent('omnifit-webSocket-send', {'detail': obj});
    var a = window.dispatchEvent(event);
    console.log("wsSend "+obj+"  "+a);
  }
  function wsObserver() {
    var obj = {action: 'profile', method: 'put', body: {host: 'observer'}};
    var event = new CustomEvent('omnifit-webSocket-send', {'detail': obj});
    var a = window.dispatchEvent(event);
    console.log("wsObserver "+obj+"  "+a);
  }
</script>

</html>
